
L4 스위치는 말 그대로 4계층에서 동작하면서 로드 밸런서 기능이 있는 스위치임.
내부 동작은 L4 로드 밸런서 이지만 스위치처럼 여러개의 포트를 가지고 있음. 가장 대중화 되어있는 형태.
**부하분산, 성능 최적화, 리다이랙션**등의 기능을 제공.

![[Pasted image 20231013134622.png]]
L4가 동작하려면 가상서버, 가상 ip, 리얼 서버 와 같은 리얼 ip를 설정해야 함.
L4스위치는 가상 ip를 통해 사용자가 통신할 수 있는 인터페이스를 젝ㅇ함.
사용자가 가상 Ip로 요청을 보내면 로드밸런서는 이를 리얼 ip로 다시 변경해서 부하를 분산함.

![[Pasted image 20231013134948.png]]
L3 라우터(상용 Ip와 로컬 ip를 구분해서 뿌려주는)-> L4로드밸런서(가상 ip로 요청을 받고 이를 새끼 서버한테 배정하는) 의 플로우를 거친다고 함. 복잡노


# [[ADC(Application Delivery Controller)]]

ADC는 애플리 케이션 계층에서 동작하는 로드밸런서.
4계층에서 일하는 친구와 달리 애플리케이션 헤더와 내용을 이해하고 동작하기 때문에 다양한 부하 분산, 정보 수정, 정보 필터링 가능.
많은 ADC들은 L4의 기능들을 모두 포함하는 것 뿐만 아니라, 페일오버(장애 극복), 리다이랙션, 캐싱,압축 , 콘텐츠 변환 및 재작성, 인코딩 변환, 프로토콜 최적화기능까지 제공할 수 도 있음.


# ADC vs L4스위치

L4 는 4계층에서 동작 하기 때문에 tcp,udp 정보를 기반으로 부하를 분산함.
이뿐만 아니라 TCP계층에서의 최적화와 보안기능도 함께 제공할 수 있음. 
TCP레벨의 간단한 Ddos 공격을 방어하거나 TCP세션 재사용등으로 서버 부하를 줄이는 등의 역할 수행가능합니다.

ADC는 7계층에서 동작 하기 때문에, 애플리케이션 프로토콜을 이해하고 더 많은 기능을 제공합니다,.
ADC는 성능최적화를 위해 부하가 많이 가는 작업을 별도로 수행하는데 이중 하나가 정적 콘텐츠 캐싱 기능입니다. 
웹서버에 콘텐츠 압축 기능이 있지만 adc에서 이 역할을 수행해 웹서버의 부하를 줄일 수 있음. 
