
실행파일은 프로세스의 실행 중에 사용하는 코드와 데이터외에도 아래와 같은 정보가 필요함.
- 데이터 영역의 파일상 오프셋, 사이즈, 메모리 맵 시작주소
- 코드 외의 변수 등에서의 데이터 영역에 대한 같은 정보(오프셋, 사이즈, 메모리맵 시작주소)
- 최초로 실행할 명령의 메모리 주소(엔트리 포인트)

프로그램 파일구조
![](https://i.imgur.com/Bu3fWft.png)
header에는 파일의 오프셋, 영역의 사이즈, 메모리 맵 시작 주소 등등의 실행파일에 대한 정보가 들어가 있음. 

코드들은 기계어로 변역 될 때, 메모리를 조작하도록 컴파일 되는데, 이때 파일 파일 헤더의 정보를 기준으로 (메모리 위치, 크기) 메모리에 저장 된다.
저장된 후 엔트리 포인트 예시의 경우 0x401000일듯 에서부터 코드를 읽으면 됨.

## ELF 열람

readelf 라는 커맨드를 통해서 실행파일의 ELF형식으로 작성 된 복잡한 내용을  열람할 수 있음.
readelf -h /bin/sleep 라고 명령하면,
	..
	Entry point address: 0x401760
	..
라는 결과가 나온다고 함. 

## 프로세스 메모리 맵 

교재에서는 리눅스에서 프로그램 실행 시에 작성 된 프로세스 메모리 맵은 /proc/pid/maps파일을 통해 알 수 있다고 하지만 macOS에서는 vmmap(Virtual Memory MAP인듯)을 사용해야함.


![](https://i.imgur.com/8NT0A3k.png)
엄청 길게 나왔는데 이부분이 text, data별로 할당 된 부분을 설명하는 듯.