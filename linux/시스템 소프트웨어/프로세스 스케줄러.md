
**cpu는 동시에 하나의 프로세스만을 처리할 수 있음.**

그렇다면 어떻게 컴퓨터는 여러개의 파일을 한번에 실행시키는 것일까

**왜냐하면 하나의 cpu가 여러개의 프로세스를 실행해야 할 때는 각 프로세스를 적절한 시간으로 쪼개서 번갈아 처리하기 때문이다.**

os의 사용자는 os가 마치 하나의 프로세스만 실행하는 것 처럼 보이지만 실상은 그렇지 않다.
os는 한순간에도 수면 아래의 백조의 발처럼 백그라운드에서 수개의 프로세스를 돌리고 있고, 사용자가 단지 그것을 인식하지 못할 뿐임.
![](https://i.imgur.com/8gG10y0.png)
한 순간에도 커널모드와 유저모드를 왕복하며 동시에 다양한 프로세스를 실행시킨다. 
이를 컨텍스트 스위치라고 합니다.
컨텍스트 스위치는 프로세스가 어떤 프로그램을 실행중이더라도 타임 슬라이스를 모두 소비하면 발생합니다.

```
ps ax
```
커맨드는 모든 프로세스를 출력하도록 한다. 
[[Process States]] 상태를 참고해서 보면,

![](https://i.imgur.com/EeRwF2k.png)
대다수가 S(sleeping)이거나 Ss(세션리더라고 함)상태임을 알 수 있으나, ps ax는 실행당시 R(running)임을 알 수 있다. 

논리 cpu에서는 여러개의 프로세스가 지속적으로 교체 되는데 프로세스는 지속적으로 R과 S상태를 왕복하며 cpu에서 실행 되고, cpu는 타임 슬라이스 마다 새로운 프로세스를 바꿔가며 실행한다.
만약 CPU에 실행시킬 프로세스가 없다면 idle이라는 아무것도 하지않는 특수한 프로세스가 cpu를 차지하는데 이는 cpu를 휴식시키며 전력낭비를 줄인다.

![](https://i.imgur.com/lHNeFS0.png)
sar이라는 키워드로 cpu별 프로세스 실행량을 알 수 있는데 %idle이 대다수 임을 알 수 있다.

# 스루풋과 레이턴시

각종 처리의 성능지표이다 
## 스루풋
	단위 시간당 처리된 일의 양이 높을수록 좋다
## 레이턴시
	각각의 처리가 시작부터 종료까지의 경과 된 시간으로 짧을 수록 좋다

예상할 수 있다시피 스루풋은 cpu가 안쉬고 많이 일할 수록 좋다(idle이 적다)
그러나 이미 idle이 0이라면 더이상 커질 수 없다.

만약 논리 cpu에 하나의 프로세스 만을 실행시켜 idle이 생긴다면 스루풋이 낫겠지만, 
이미 2개 이상의 프로세스를 실행해 idle이 0이 된다면 더 이상  스루풋은 개선될 수 없고,
각각의 프로세스의 종료시간을 늘려 레이턴시만 증가 된다. 