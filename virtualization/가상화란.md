한줄: 가상화는 물리적 컴퓨터를 독립적인 가상 컴퓨터로 추상화 하는 기술.

가상화는 컴퓨터의 리소스를 추상화하고 분리하여 컴퓨터의 리소스를 효율적으로 사용할 수 있게 하는 기술이다. 각자의 VM 혹은 프로세스는 같은 모두 같은 컴퓨터, 혹은 한정 된 리소스 내에서 운영 됨에도 불구하고, 마치 자신만이 독립적으로 운영되고 있는 것처럼 보이게 한다.

가상화는 아래의 특성에 따라 장점을 가지고 널리 사용되고 있다
- 서버 통합: 가상화를 통해 제한 된 물리 환경에 좀 더 많은 서버를 효율적으로 배치할 수 있다. 덕분에 많은 자원을 아낄 수 있다.
- 서비스 격리: 가상화를 통해 같은 물리 자원을 사용하더라도 마치 격리된 서비스를 돌리는 것 처럼 각각의 서비스를 독립적으로 구성할 수 있다.
- 빠른 서버 프로비저닝: 미리만들어진 이미지나 스냅샷을 통해 신속하게 가상머신을 생성할 수 있다.
- 동적 부하 분산: 리소스의 사용량에 따라 특정 서비스를 다른 베어메탈서버에 잠깐 옮기는 등의 유연하게 부하를 분산시킬 수 있다.
이외에도 유연한 테스트 환경 구성, 시스템 안정성과 보안의 상승 등의 장점들이 있다.

가상화는 하이퍼바이져의 종류 따라 여러 타입으로 나뉜다.

## 가상화 타입

**type1(베어메탈 형): (좌측 그림)**

하이퍼바이저가 하드웨어 바로 위에 위치한다. 
OS위에 존재하는 type2와 달리 기저 OS 가 필요하지 않기 때문에 적은 오버헤드가 특징이다.

대표 가상화 기술: xen

**type2: (우측)**

하드웨어 위에 기저 OS가 존재하고, 그 위에 하이퍼바이저가 올려져 있는 형태이다.
매 호스트마다 OS깔아야하기 때문에 클라우드 등의 공간효율성을 중시하는 서비스의 경우 적합하지 않을 수 있다.

**번외) 컨테이너**(os 가상화)

컨테이너 기술을 다른 vm과 비교하여 경량화 된 파티셔닝을 지원하는 게 특징이다.
type2와 비교할 수 있는데 host OS위에 매게(hypervisor OR engine(ex.docker engine))이 올라가는 것은 동일 하지만, 컨테이너에서는 게스트 OS를 완전히 가상화 하는 것이 아니라 host OS 커널의 시스템콜을 사용하여 격리 환경을 구성한다.

덕분에 가볍게 격리환경을 구성할 수 있지만, vm에 비해 보안 취약점을 가지고(커널의 시스템콜을 공유하기 때문에), 커널 부터 다른 OS 는 실행하기 위해 추가 조치가 필요하다.



대표 가상화: vmware , virtual box

![](https://i.imgur.com/ul7hkMe.png)

실제로 운영체제에서도 간소화 된 가상화 시스템을 포함하고 있다고 한다.
특히 프로세스별로 할당되는 메모리는 가상 메모리로, 사용자가 가상메모리에 데이터를 자장하면, 커널에서 이 데이터를 대신 물리 메모리에 저장한다.
또한 cpu와 디바이스들도 가상화를 통해서 다른  프로세스의 간섭없이 마치 자신들만 존재하는 것과 같은 환경을 제공해, 걱정없이 리소스에 접근 할 수 있도록 한다.

# [[cpu 가상화]]


