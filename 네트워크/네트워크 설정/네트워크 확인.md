
네트워크를 최초로 실행시킬때도 사용할 수 있지만, 갑작스러운 오류상황에서도 요긴하게 써먹는 명령어들 


# ping  옵션  목적지

ping 8.8.8.8 -c 2 -s 100 
는 8.8.8.8(google dns)에 핑을 2번, 100바이트 짜리 패킷을 보내는 명령어입니다.
핑은 단말이 살아있는지, 중간 경로에 문제가 없는지 확인하는데는 문제가 없지만,
방화벽과 같은 보안장비에 막히지 않는지, 서비스 포트가 잘 살아있는지는 확인할 수가 없습니다. 


**그래서 실제로 서비스가 작동하는지를 확인하기 위해선 다른 명령어를 사용합니다.**
# tcping 은 이때 서비스포트가 정상적으로 확인하는지 확인할 수 있게 합니다.

# traceroute 
는 중간경로의 상세정보를 알고싶을때 사용합니다.
ttl(time to live) 값을 하나씩 올려 패킷을 전송하는데 ttl이 만료된 값을 받았을때 만료 이유를 반환하는데, 반환하는 단말기의 ip값을 추적하면서 동작합니다.

비대칭 경로인 경우를 감지하기 위해선 두개의 단말이 모두 보내는것이 바람직합니다.
![](https://i.imgur.com/r87vYqo.png)

위의 그림처럼 경유하는 라우터의 ip주소를 알 수 있습니다.

# tcptraceroute

이전의  ping 과 tcping의 관계처럼 단순 경로 파악 뿐만아니라 서비스 작동유무, 서비스 포트 정보까지 알 수 있는 명령어가 있습니다.


# netstat

다양한 네트워크 상태를 확인하는데 사용하는 명령어, 범위는 넓지만 서비스 포트 상태를 확인하는데 가장 많이 쓰임. 
서비스가 정상적으로 작동하고 있는지, 포트가 잘 열려있는지를 확인할 수  있음.

```
netstat -ant
```
 라는 명령어로 tcp에 대한 모든 연결과 수신 대기 정보를 숫자로 표기할 수 있음
 -a 모든 연결과 수신 대기 포트 표시
 -n 주소와 포트번호를 숫자 형식으로 표시
 -t tcp만 출력 
![](https://i.imgur.com/rNaBaUe.png)

아래와 같은 결과를 확인할 수 있음

```
netstat -s -p TCP
```
TCP프로토콜(-p TCP)의 통계값(-s)을 확인하는 명령어


# ss

소켓 정보를 확인하는 명령어임
ss는 netstat을 대체할 수 도 있고 다른 명령어를 추가로 지원하기도 함.

```
ss -lp | grep http
```
위 명령어는-l(listening 상태의 소켓을 표시), -p(현재 소켓에서 사용중인 프로세스 표시)

# nslookup

nslookup은 도메인 관련 내용을 질의해 결과값을 전송받을 수 있는 명령임.
특정 도메인에 매핑되어있는 ip값을 받기 위해 자주 사용.
명령을 통해 질의할 네임 서버를 고르거나 레코드값을 설정할 수 있음

# telnet

원격지 호스트 터미널과 연결하기 위해 사용됐던 고전적인 프로토콜이나, 평문을 그대로 보내기 때문에 보안적으로는 취약함.
암호화 한 상태로 보내는 ssh가 좀 더 선호되는 듯. ㅇㅇ 

그래도 telnet을 사용하겠다면 
telnet 목적지 ip 서비스 포트 
의 문장으로 명령 가능

만약 접근이 불가능한 경우에는 
 - 도착지 단말이 꺼져 있거나 네트워크가 정상적으로 연결되어 있지 않은 경우
 - 만말의 네트워크 설정에 문제가 있는경우
 - 도착지 까지의 경로가 정상적으로 잡혀있지 않음
 - 경로상 보안장비등에 차단 됨
 - iptables와 같은 보안 기능에 차단 됨
 - 단말이 정상적으로 열려 있지 않은 경우

해법
- 네트워크 경로의 문제라면 ping 테스트, traceroute명령어로 대략적인 유추 가능
- 보안장비에 의해 차단당했다면, ICMP프로토콜이나 다른 포트를 사용하거나, 보안장비를 유하지 않는 경로로 전송함
- netstat, ss 명령어로 서비스 정상가동 확인


# tcpdump

네트워크 인터페이스로 오가는 패킷을 캡쳐해 보는 기능의 명령어임.
네트워크에 장애가 발생할 때나 오가는 패킷을 캡처하여 분석 할 수  있음.
```
tcpdump -i eth0 tcp port 80
```

웹서비스에 대한 패킷을 캡쳐하고 싶을때는 다양한 옵션을 줘서 해결 할 수 있음.
