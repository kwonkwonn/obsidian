 [[도커/개요]]


![](https://i.imgur.com/YcjCxzj.png)

개요에서 도커는 버츄얼 머신과 다르게 각각의 Os를 설치할 필요가 없다고 했는데, 이는 모든 컨테이너들이 os가 아닌 kernel을 공유하기 때문이다.

여기서는 다양한 기술이 활용 됨을 알 수있다.

가장 핵심이 되는 것은 cgroup으로 cgroup은 리눅스 커널에서 특정한 프로세스 들에게 유저가 원하는 만큼의 자원을 할당 할 수 있도록 하는 것이다.

만약, processA, processB에서 200mb정도의 메모리를 할당한다면, processA와 processB는 최대 200mb 정도의 메모리만을 차지하게 될 것이고, hard limit을 걸었다면, 메모리의 한계에 다다를 경우 프로세스를 강제로 종료시킬 수 있을 것이다.

그런 의미에서 우리가 가지는 최대 리소스(예_컴퓨터 한대)도 사실 이런 group의 내부라고 생각 할수도 있으며, 우리는 /에서 시작하는(사용가능한 모든 리소스) 일종의 트리 형태로 가지고 있는 다양한 리소스를 활용하고 있다고 할 수 있다. 여기서 말하는 리소스는 단순 메모리가 아니라, cpu, 디스크, 네트워크 등이 포함될 수 있다.

cgroup을 통해 리소스의 한계를 제한할 수 있다고 하더라도, 이는 우리가 아는 컨테이너와는 아직 멀어보이는데, 그 외에도 namespace, union file system 등을 활용하여 여러 프로세스를 마치 아예 다른 환경처럼 '논리적으로' 격리시킨다.

이러한 이유들 덕분에 사실 컨테이너화는 완전한 격리라고 보기 어려우며, 사실 같은 커널과 시스템콜을 사용하는 호스트 내부에서 일종의 벽을 치는 기술이라고 생각할 수 있다.

덕분에 컨테이너화는 가상화에 비해 가볍다, 빠르다, 유연하다 등과 같은 장점을 가지지만, 오염된 이미지에 의해 호스트 커널에 큰 피해를 줄 수도 있고, 완전한 가상화가 아니라는 점에서 다른 os나 아키텍처 의 이미지는 가상화의 도움을 받아야 한다는점, os 레벨에서의 동작이 실제 물리환경과 다를 수 있다는 단점이 있다.

