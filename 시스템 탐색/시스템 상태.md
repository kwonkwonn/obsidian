
top 명령어는 시스템의 상태를 알 수 있다.
![](https://i.imgur.com/IaC3m8t.png)

1. `PID`: 프로세스 ID, 각 프로세스를 고유하게 식별하는 번호입니다.
2. `COMMAND`: 실행 중인 프로세스의 이름 또는 명령어입니다.
3. `%CPU`: CPU 사용률을 백분율로 나타냅니다. 프로세스가 CPU를 얼마나 사용하는지를 나타냅니다.
4. `TIME`: 해당 프로세스가 실행된 시간입니다.
5. `#TH`: 프로세스에서 실행 중인 스레드(thread)의 수를 나타냅니다.
6. `#WQ`: 현재 대기 중인 스레드(thread)의 수를 나타냅니다.
7. `#PORT`: 프로세스에서 사용 중인 포트(네트워크 포트 등)의 수를 나타냅니다.
8. `MEM`: 메모리 사용량을 나타냅니다. 이 값은 일반적으로 메모리 점유 크기를 나타냅니다.
9. `PURG`: 파일 시스템 캐시에서 영구적으로 삭제된 페이지의 양을 나타냅니다.
10. `CMPRS`: 압축된 메모리의 양을 나타냅니다.
11. `PGRP`: 프로세스 그룹 ID, 프로세스가 속한 그룹을 식별하는 번호입니다.
12. `PPID`: 부모 프로세스 ID, 해당 프로세스의 부모 프로세스를 식별하는 번호입니다.
13. `STATE`: 프로세스 상태를 나타냅니다. "running" 또는 "sleeping"과 같은 값이 있습니다.
14. `BOOSTS`: 프로세스에 대한 CPU 부스트 정보를 제공합니다.
15. `%CPU_ME`: 프로세스의 사용자(CPU) 시간 백분율을 나타냅니다.
16. `%CPU_OTHRS`: 프로세스의 다른(CPU) 시간 백분율을 나타냅니다.
17. `UID`: 프로세스 소유자의 사용자 ID를 나타냅니다.
18. `FAULTS`: 페이지 부재 횟수를 나타냅니다. (메모리 페이지 교체 정보)
19. `COW`: 페이지 복사(Copy-On-Write) 횟수를 나타냅니다.
20. `MSGSENT`: 송신한 메시지의 수를 나타냅니다.

라고 한다 (gpt)

교재에서는 VIRT, RES, SHR 와 같은 값들도 표시가 되었는데 내껀 안돼서 걍 써봄.

VIRT 는 프로세스별로 할당 된 가상 메모리의 값이고,
RES는 할당 된 물리 메모리의 값이라고 한다.
SHR 는 공유하고 있는 메모리의 양 이라고 하는데,  라이브러리가 예시가 될수 있단다

프로세스가 메모리에 값을 쓸때 (alloc 처럼) 사실 메모리에 바로 값을 작성하는 것이 아니라 가상 메모리를 할당 받은 후, 해당 메모리에 값을 쓰기 전까지는 가상 메모리만 할당한 채로 남는다(memory commit)

할당 받은 메모리에 값을 쓰기 전까지는, 실제 메모리는 가상 메모리에 매핑 되고 있지 않다가, 쓰는 순간, 메모리를 바인딩 하여 값을 작성한다.
바로 작성하지 않고, 가상 메모리를 할당을 하고, ㅅ작성 할때만 사용하는 이유는 fork()와 같은 프로세스를 복제할때, 쓸모없는 메모리가 할당 될 수 있기 때문이다.

이런 상황에선, 가상 메모리가 실제 메모리의 양을 넘거나 가상 메모리가 너무 많이 커밋 될 수 있는데, 이때는 시스템에 부하가 생기거나, 커널이 응답을 안하는 상황이 생길 수 있따,

이때 vm.overcommit_memory라는 파라미터로 제어할 수 있다.


